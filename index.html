<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>PEPEGAME - Tap to Earn</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      background:
        radial-gradient(circle at top, #151b3f 0%, #050816 55%, #02020a 100%);
      color: #f5f5f5;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      text-align: center;
      padding: 20px 10px 96px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.25), transparent 60%);
      pointer-events: none;
      z-index: -1;
      filter: blur(1px);
    }
    body::before {
      width: 140px;
      height: 140px;
      top: 10%;
      left: 8%;
    }
    body::after {
      width: 180px;
      height: 180px;
      bottom: 5%;
      right: 4%;
    }

    #top-bar {
      font-size: 12px;
      opacity: 0.85;
      margin-bottom: 8px;
    }

    /* Logo */
    #logo-wrapper {
      margin-top: 6px;
      margin-bottom: 8px;
    }
    #logo-coin {
      width: 96px;
      height: 96px;
      margin: 0 auto;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffe27a, #f5b700 55%, #b27a00 100%);
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.8);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5px;
    }
    #logo-coin-inner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      background: radial-gradient(circle at 30% 20%, #020617, #0f172a 70%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #logo-coin-inner img {
      width: 115%;
      height: 115%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    #logo-text {
      font-size: 10px;
      margin-top: 4px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      opacity: 0.9;
      color: #facc15;
    }

    h1 {
      margin: 6px 0 4px;
      font-size: 20px;
    }
    #subtitle {
      font-size: 12px;
      opacity: 0.8;
      margin-bottom: 12px;
    }

    /* Barre de niveau */
    #level-bar-container {
      width: 82%;
      max-width: 340px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      margin: 0 auto 6px;
      overflow: hidden;
    }
    #level-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      transition: width 0.2s ease-out;
    }
    #level-text {
      font-size: 12px;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    #buff-text {
      font-size: 11px;
      color: #facc15;
      margin-bottom: 14px;
      min-height: 14px;
    }

    #points {
      font-size: 28px;
      margin: 6px 0 6px;
    }
    #next-target {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 10px;
    }

    #tap-button {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border: none;
      color: white;
      padding: 16px 40px;
      font-size: 20px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.6);
      transition: transform 0.06s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
      touch-action: manipulation;
    }
    #tap-button:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.7);
      filter: brightness(0.95);
    }
    #tap-button:disabled {
      background: linear-gradient(135deg, #4b5563, #374151);
      cursor: not-allowed;
      box-shadow: none;
      filter: grayscale(0.1);
    }

    #energy-text {
      margin-top: 10px;
      font-size: 14px;
      opacity: 0.9;
    }

    #floating-plus {
      position: relative;
      height: 24px;
      margin-top: 6px;
      font-size: 16px;
      color: #4ade80;
      opacity: 0;
      transition: opacity 0.2s ease-out, transform 0.2s ease-out;
    }

    /* Panneau upgrades + missions */
    #bottom-panel {
      position: fixed;
      bottom: 14px;
      left: 50%;
      transform: translateX(-50%);
      width: 94%;
      max-width: 420px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #upgrades {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 14px;
      padding: 8px 12px;
      font-size: 12px;
      text-align: left;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(59, 130, 246, 0.6);
    }
    #upgrades-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 12px;
    }
    .upgrade-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 2px 0;
      gap: 6px;
    }
    .upgrade-label {
      font-size: 11px;
      opacity: 0.9;
    }
    .upgrade-btn {
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 8px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      touch-action: manipulation;
      white-space: nowrap;
    }
    .upgrade-btn:disabled {
      background: linear-gradient(135deg, #4b5563, #374151);
      opacity: 0.6;
      cursor: not-allowed;
    }

    #missions {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 14px;
      padding: 8px 12px;
      font-size: 12px;
      text-align: left;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }
    #missions-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 12px;
    }
    .mission-line {
      margin: 2px 0;
      opacity: 0.9;
      font-size: 11px;
    }

    #disclaimer {
      margin-top: 10px;
      font-size: 10px;
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div id="top-bar">Invit√© #1234 ¬∑ Niveau <span id="level-label">1</span></div>

  <div id="logo-wrapper">
    <div id="logo-coin">
      <div id="logo-coin-inner">
        <img src="image-6.png" alt="Logo Crypto Win Frog" />
      </div>
    </div>
    <div id="logo-text">Pepe USD ¬∑ Game</div>
  </div>

  <h1>PEPEGAME ‚Äì Tap PEPE</h1>
  <div id="subtitle">Farm tes PEPE Points, upgrades & bonus x2 (prototype local)</div>

  <div id="level-bar-container">
    <div id="level-bar-fill"></div>
  </div>
  <div id="level-text">XP : <span id="xp-value">0</span> / <span id="xp-max">100</span></div>
  <div id="buff-text"></div>

  <div id="points">Points : 0</div>
  <div id="next-target">Prochain coffre √† 200 points</div>

  <button id="tap-button">TAP PEPE üê∏</button>
  <div id="energy-text">√ânergie : 100 / 100</div>
  <div id="floating-plus"></div>

  <div id="disclaimer">Pepe USD Game est un prototype ludique. Aucun gain r√©el, pas un conseil financier.</div>

  <div id="bottom-panel">
    <div id="upgrades">
      <div id="upgrades-title">Upgrades (points locaux)</div>
      <div class="upgrade-row">
        <div class="upgrade-label">+1 point par tap (niveau <span id="lvl-tap">1</span>)</div>
        <button class="upgrade-btn" id="btn-up-tap">Co√ªt : 50</button>
      </div>
      <div class="upgrade-row">
        <div class="upgrade-label">+20 √©nergie max (actuel : <span id="lvl-energy">100</span>)</div>
        <button class="upgrade-btn" id="btn-up-energy">Co√ªt : 80</button>
      </div>
      <div class="upgrade-row">
        <div class="upgrade-label">Regen plus rapide (-5 s) </div>
        <button class="upgrade-btn" id="btn-up-regen">Co√ªt : 60</button>
      </div>
    </div>

    <div id="missions">
      <div id="missions-title">Missions du jour</div>
      <div class="mission-line" id="mission-coffre">‚Ä¢ Gagner 200 points ‚Üí Coffre bronze</div>
      <div class="mission-line" id="mission-taps">‚Ä¢ Faire 100 taps ‚Üí Boost x2 30s</div>
      <div class="mission-line" id="mission-streak">‚Ä¢ 25 taps d'affil√©e sans pause ‚Üí Mini bonus x2 10s</div>
    </div>
  </div>

  <script>
    // Stats de base
    let points = 0;
    let taps = 0;
    let level = 1;
    let xp = 0;
    const xpPerLevel = 100;

    // Upgrades
    let tapValue = 1;
    let tapUpgradeLevel = 1;

    let maxEnergy = 100;
    let energy = maxEnergy;
    let baseRegenMs = 30000; // 30s au d√©but
    let regenMs = baseRegenMs;

    const coffreTarget = 200;
    const tapsTarget = 100;
    const streakTarget = 25;
    let streak = 0;
    let lastTapTime = 0;
    const streakTimeoutMs = 4000; // si tu arr√™tes +4s, la s√©rie casse

    // Buff x2
    let isBuffActive = false;
    let buffMultiplier = 1;
    let buffEndTime = 0;
    let buffInterval = null;

    // Points ‚Üí XP
    const pointsPerXp = 10;

    // Elements
    const pointsEl = document.getElementById('points');
    const tapBtn = document.getElementById('tap-button');
    const levelLabelEl = document.getElementById('level-label');
    const xpValueEl = document.getElementById('xp-value');
    const xpMaxEl = document.getElementById('xp-max');
    const levelBarFillEl = document.getElementById('level-bar-fill');
    const levelTextEl = document.getElementById('level-text');
    const nextTargetEl = document.getElementById('next-target');
    const floatingPlusEl = document.getElementById('floating-plus');
    const energyTextEl = document.getElementById('energy-text');
    const missionCoffreEl = document.getElementById('mission-coffre');
    const missionTapsEl = document.getElementById('mission-taps');
    const missionStreakEl = document.getElementById('mission-streak');
    const buffTextEl = document.getElementById('buff-text');

    const lvlTapEl = document.getElementById('lvl-tap');
    const lvlEnergyEl = document.getElementById('lvl-energy');
    const btnUpTap = document.getElementById('btn-up-tap');
    const btnUpEnergy = document.getElementById('btn-up-energy');
    const btnUpRegen = document.getElementById('btn-up-regen');

    function updateUI() {
      pointsEl.textContent = 'Points : ' + points;
      xpValueEl.textContent = xp;
      xpMaxEl.textContent = xpPerLevel;
      levelLabelEl.textContent = level;

      const xpPercent = Math.min(100, (xp / xpPerLevel) * 100);
      levelBarFillEl.style.width = xpPercent + '%';

      const xpToNextLevel = Math.max(0, xpPerLevel - xp);
      levelTextEl.textContent =
        'XP : ' + xp + ' / ' + xpPerLevel + ' ¬∑ Encore ' + xpToNextLevel + ' XP pour le niveau suivant';

      const pointsToCoffre = Math.max(0, coffreTarget - points);
      if (pointsToCoffre === 0) {
        nextTargetEl.textContent = 'Coffre bronze d√©bloqu√© (visuel) !';
      } else {
        nextTargetEl.textContent = 'Prochain coffre : ' + pointsToCoffre + ' points restants';
      }

      const tapsRemaining = Math.max(0, tapsTarget - taps);
      missionTapsEl.textContent =
        '‚Ä¢ Faire 100 taps ‚Üí Boost x2 30s (reste ' + tapsRemaining + ')';

      missionCoffreEl.textContent =
        '‚Ä¢ Gagner 200 points ‚Üí Coffre bronze (reste ' + pointsToCoffre + ')';

      const streakRemaining = Math.max(0, streakTarget - streak);
      missionStreakEl.textContent =
        '‚Ä¢ S√©rie de 25 taps (reste ' + streakRemaining + ') ‚Üí Mini bonus x2 10s';

      energyTextEl.textContent = '√ânergie : ' + energy + ' / ' + maxEnergy;
      tapBtn.disabled = energy <= 0;

      lvlTapEl.textContent = tapUpgradeLevel;
      lvlEnergyEl.textContent = maxEnergy;
      btnUpTap.disabled = points < 50;
      btnUpEnergy.disabled = points < 80;
      btnUpRegen.disabled = points < 60;
    }

    function startBuff(durationMs, label) {
      const now = Date.now();
      buffEndTime = now + durationMs;
      isBuffActive = true;
      buffMultiplier = 2;
      buffTextEl.textContent = 'Bonus actif : x2 (' + label + ')';

      if (buffInterval) clearInterval(buffInterval);
      buffInterval = setInterval(() => {
        const remaining = buffEndTime - Date.now();
        if (remaining <= 0) {
          isBuffActive = false;
          buffMultiplier = 1;
          buffTextEl.textContent = '';
          clearInterval(buffInterval);
        }
      }, 200);
    }

    function handleTap() {
      if (energy <= 0) return;

      const now = Date.now();
      if (!lastTapTime || now - lastTapTime <= streakTimeoutMs) {
        streak += 1;
      } else {
        streak = 1;
      }
      lastTapTime = now;

      const gainBase = tapValue;
      const gain = gainBase * buffMultiplier;
      points += gain;
      taps += 1;
      energy = Math.max(0, energy - 1);

      if (points % pointsPerXp === 0) {
        xp += 1;
      }

      if (xp >= xpPerLevel) {
        xp -= xpPerLevel;
        level += 1;
        alert('LEVEL UP ! Niveau ' + level);
      }

      // Mission taps 100 ‚Üí gros buff 30s
      if (taps === tapsTarget) {
        startBuff(30000, '100 taps');
        alert('Boost x2 pendant 30s !');
      }

      // S√©rie 25 taps ‚Üí mini buff 10s
      if (streak === streakTarget) {
        startBuff(10000, 's√©rie 25');
        alert('Mini bonus x2 pendant 10s !');
      }

      showFloatingPlus(gain);
      updateUI();
    }

    function showFloatingPlus(gain) {
      floatingPlusEl.textContent = '+' + gain;
      floatingPlusEl.style.opacity = '1';
      floatingPlusEl.style.transform = 'translateY(0px)';

      setTimeout(() => {
        floatingPlusEl.style.opacity = '0';
        floatingPlusEl.style.transform = 'translateY(-10px)';
      }, 200);
    }

    // Regen √©nergie
    setInterval(() => {
      if (energy < maxEnergy) {
        energy += 1;
        updateUI();
      }
    }, () => regenMs);

    // Upgrades
    btnUpTap.addEventListener('click', () => {
      if (points < 50) return;
      points -= 50;
      tapUpgradeLevel += 1;
      tapValue += 1;
      updateUI();
    });

    btnUpEnergy.addEventListener('click', () => {
      if (points < 80) return;
      points -= 80;
      maxEnergy += 20;
      energy = maxEnergy;
      updateUI();
    });

    btnUpRegen.addEventListener('click', () => {
      if (points < 60) return;
      points -= 60;
      regenMs = Math.max(10000, regenMs - 5000); // minimum 10s
      alert('Regen √©nergie am√©lior√©e !');
      updateUI();
    });

    tapBtn.addEventListener('click', handleTap);

    updateUI();
  </script>
</body>
</html>
