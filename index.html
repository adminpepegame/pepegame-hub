<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>PEPEGAME - Tap Ninja Frog</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      color: #f9fafb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      text-align: center;
      padding: 16px 10px 112px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.6s ease;
    }

    /* Th√®mes nuit / aube / jour */
    body.theme-night {
      background:
        radial-gradient(circle at top, #020617 0%, #020617 40%, #020617 100%);
    }
    body.theme-dawn {
      background:
        linear-gradient(to top, #0f172a 0%, #1e293b 35%, #f97316 70%, #facc15 100%);
    }
    body.theme-day {
      background:
        linear-gradient(to top, #0ea5e9 0%, #38bdf8 35%, #facc15 80%, #fef9c3 100%);
      color: #0f172a;
    }

    #top-bar {
      font-size: 12px;
      opacity: 0.85;
      margin-bottom: 4px;
    }

    h1 {
      margin: 4px 0 2px;
      font-size: 20px;
    }
    #subtitle {
      font-size: 12px;
      opacity: 0.85;
      margin-bottom: 8px;
    }

    /* Zone de jeu */
    #game-area {
      position: relative;
      width: 100%;
      max-width: 420px;
      height: 260px;
      margin-top: 8px;
      margin-bottom: 10px;
      border-radius: 18px;
      overflow: hidden;
      background: radial-gradient(circle at 20% 0%, rgba(248, 250, 252, 0.12), transparent 55%);
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      touch-action: manipulation;
    }

    #sky-layer {
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    #ground {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 70px;
      background:
        linear-gradient(to top, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.9));
      box-shadow: 0 -6px 14px rgba(0, 0, 0, 0.8);
      z-index: 2;
    }

    body.theme-day #ground {
      background:
        linear-gradient(to top, #166534, #22c55e);
      box-shadow: 0 -4px 12px rgba(22, 163, 74, 0.8);
    }

    #ground-line {
      position: absolute;
      top: 8px;
      left: 6%;
      right: 6%;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, #facc15, #f97316);
      opacity: 0.9;
    }

    #frog {
      position: absolute;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 96px;
      height: 96px;
      z-index: 3;
    }

    #frog img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      filter: drop-shadow(0 12px 18px rgba(0, 0, 0, 0.9));
      transition: filter 0.2s ease;
    }

    .frog-buff img {
      filter:
        drop-shadow(0 0 12px rgba(34, 197, 94, 0.8))
        drop-shadow(0 14px 20px rgba(0, 0, 0, 0.9));
    }

    @keyframes frogJump {
      0%   { transform: translate(-50%, 0) scale(1); }
      20%  { transform: translate(-50%, -28px) scale(1.03); }
      50%  { transform: translate(-50%, -44px) scale(1.05) rotate(-2deg); }
      80%  { transform: translate(-50%, -18px) scale(1.02); }
      100% { transform: translate(-50%, 0) scale(1); }
    }

    .jumping {
      animation: frogJump 0.35s ease-out;
    }

    #level-bar-container {
      width: 82%;
      max-width: 340px;
      height: 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.6);
      margin: 0 auto 4px;
      overflow: hidden;
    }
    #level-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      transition: width 0.2s ease-out;
    }
    #level-text {
      font-size: 12px;
      opacity: 0.9;
      margin-bottom: 4px;
    }

    #buff-text {
      font-size: 11px;
      color: #facc15;
      margin-bottom: 8px;
      min-height: 14px;
    }

    #points {
      font-size: 26px;
      margin: 4px 0 4px;
    }
    #next-target {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    #tap-button {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border: none;
      color: white;
      padding: 16px 40px;
      font-size: 20px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.7);
      transition: transform 0.06s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
      touch-action: manipulation;
      margin-bottom: 6px;
    }
    #tap-button:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.8);
      filter: brightness(0.95);
    }
    #tap-button:disabled {
      background: linear-gradient(135deg, #4b5563, #374151);
      cursor: not-allowed;
      box-shadow: none;
      filter: grayscale(0.1);
    }

    #energy-text {
      font-size: 13px;
      opacity: 0.9;
    }

    #floating-plus {
      position: relative;
      height: 22px;
      margin-top: 4px;
      font-size: 16px;
      color: #4ade80;
      opacity: 0;
      transition: opacity 0.2s ease-out, transform 0.2s ease-out;
    }

    #bottom-panel {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      width: 94%;
      max-width: 420px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #upgrades {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 14px;
      padding: 8px 12px;
      font-size: 12px;
      text-align: left;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.9);
      border: 1px solid rgba(59, 130, 246, 0.6);
    }
    #upgrades-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 12px;
    }
    .upgrade-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 2px 0;
      gap: 6px;
    }
    .upgrade-label {
      font-size: 11px;
      opacity: 0.9;
    }
    .upgrade-btn {
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 8px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      touch-action: manipulation;
      white-space: nowrap;
    }
    .upgrade-btn:disabled {
      background: linear-gradient(135deg, #4b5563, #374151);
      opacity: 0.6;
      cursor: not-allowed;
    }

    #missions {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 14px;
      padding: 8px 12px;
      font-size: 12px;
      text-align: left;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }
    #missions-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 12px;
    }
    .mission-line {
      margin: 2px 0;
      opacity: 0.9;
      font-size: 11px;
    }

    #disclaimer {
      margin-top: 6px;
      font-size: 10px;
      opacity: 0.7;
    }
  </style>
</head>
<body class="theme-night">
  <div id="top-bar">Invit√© #1234 ¬∑ Niveau <span id="level-label">1</span></div>

  <h1>PEPEGAME ‚Äì Tap Ninja Frog</h1>
  <div id="subtitle">Fais sauter ta grenouille ninja, fais passer la nuit au jour (prototype local)</div>

  <div id="game-area">
    <div id="sky-layer"></div>
    <div id="frog">
      <img src="image-7.png" alt="Grenouille Ninja Crypto Win" />
    </div>
    <div id="ground">
      <div id="ground-line"></div>
    </div>
  </div>

  <div id="level-bar-container">
    <div id="level-bar-fill"></div>
  </div>
  <div id="level-text">XP : <span id="xp-value">0</span> / <span id="xp-max">100</span></div>
  <div id="buff-text"></div>

  <div id="points">Points : 0</div>
  <div id="next-target">Prochain coffre √† 200 points (jour complet √† 500+ points)</div>

  <button id="tap-button">TAP PEPE üê∏</button>
  <div id="energy-text">√ânergie : 100 / 100</div>
  <div id="floating-plus"></div>

  <div id="disclaimer">Pepe USD Game est un prototype ludique. Aucun gain r√©el, pas un conseil financier.</div>

  <div id="bottom-panel">
    <div id="upgrades">
      <div id="upgrades-title">Upgrades (points locaux)</div>
      <div class="upgrade-row">
        <div class="upgrade-label">+1 point par saut (niveau <span id="lvl-tap">1</span>)</div>
        <button class="upgrade-btn" id="btn-up-tap">Co√ªt : 50</button>
      </div>
      <div class="upgrade-row">
        <div class="upgrade-label">+20 √©nergie max (actuel : <span id="lvl-energy">100</span>)</div>
        <button class="upgrade-btn" id="btn-up-energy">Co√ªt : 80</button>
      </div>
      <div class="upgrade-row">
        <div class="upgrade-label">Regen plus rapide (-5 s)</div>
        <button class="upgrade-btn" id="btn-up-regen">Co√ªt : 60</button>
      </div>
    </div>

    <div id="missions">
      <div id="missions-title">Missions du jour</div>
      <div class="mission-line" id="mission-coffre">‚Ä¢ Gagner 200 points ‚Üí Coffre bronze</div>
      <div class="mission-line" id="mission-taps">‚Ä¢ Faire 100 sauts ‚Üí Boost x2 30s</div>
      <div class="mission-line" id="mission-streak">‚Ä¢ 25 sauts d'affil√©e ‚Üí Mini bonus x2 10s</div>
    </div>
  </div>

  <script>
    let points = 0;
    let taps = 0;
    let level = 1;
    let xp = 0;
    const xpPerLevel = 100;

    let tapValue = 1;
    let tapUpgradeLevel = 1;

    let maxEnergy = 100;
    let energy = maxEnergy;
    let regenMs = 30000;

    const coffreTarget = 200;
    const tapsTarget = 100;
    const streakTarget = 25;
    let streak = 0;
    let lastTapTime = 0;
    const streakTimeoutMs = 4000;

    let isBuffActive = false;
    let buffMultiplier = 1;
    let buffEndTime = 0;
    let buffInterval = null;

    const pointsPerXp = 10;

    const bodyEl = document.body;
    const frogEl = document.getElementById('frog');
    const gameAreaEl = document.getElementById('game-area');

    const pointsEl = document.getElementById('points');
    const tapBtn = document.getElementById('tap-button');
    const levelLabelEl = document.getElementById('level-label');
    const xpValueEl = document.getElementById('xp-value');
    const xpMaxEl = document.getElementById('xp-max');
    const levelBarFillEl = document.getElementById('level-bar-fill');
    const levelTextEl = document.getElementById('level-text');
    const nextTargetEl = document.getElementById('next-target');
    const floatingPlusEl = document.getElementById('floating-plus');
    const energyTextEl = document.getElementById('energy-text');
    const missionCoffreEl = document.getElementById('mission-coffre');
    const missionTapsEl = document.getElementById('mission-taps');
    const missionStreakEl = document.getElementById('mission-streak');
    const buffTextEl = document.getElementById('buff-text');

    const lvlTapEl = document.getElementById('lvl-tap');
    const lvlEnergyEl = document.getElementById('lvl-energy');
    const btnUpTap = document.getElementById('btn-up-tap');
    const btnUpEnergy = document.getElementById('btn-up-energy');
    const btnUpRegen = document.getElementById('btn-up-regen');

    function updateTheme() {
      bodyEl.classList.remove('theme-night', 'theme-dawn', 'theme-day');
      if (points >= 500) {
        bodyEl.classList.add('theme-day');
      } else if (points >= 200) {
        bodyEl.classList.add('theme-dawn');
      } else {
        bodyEl.classList.add('theme-night');
      }
    }

    function updateUI() {
      pointsEl.textContent = 'Points : ' + points;
      xpValueEl.textContent = xp;
      xpMaxEl.textContent = xpPerLevel;
      levelLabelEl.textContent = level;

      const xpPercent = Math.min(100, (xp / xpPerLevel) * 100);
      levelBarFillEl.style.width = xpPercent + '%';

      const xpToNextLevel = Math.max(0, xpPerLevel - xp);
      levelTextEl.textContent =
        'XP : ' + xp + ' / ' + xpPerLevel + ' ¬∑ Encore ' + xpToNextLevel + ' XP pour le niveau suivant';

      const pointsToCoffre = Math.max(0, coffreTarget - points);
      if (pointsToCoffre === 0) {
        nextTargetEl.textContent = 'Coffre bronze d√©bloqu√© (visuel) ¬∑ Jour complet √† 500+ points';
      } else {
        nextTargetEl.textContent = 'Prochain coffre : ' + pointsToCoffre + ' points restants (jour √† 500+)';
      }

      const tapsRemaining = Math.max(0, tapsTarget - taps);
      missionTapsEl.textContent =
        '‚Ä¢ Faire 100 sauts ‚Üí Boost x2 30s (reste ' + tapsRemaining + ')';

      missionCoffreEl.textContent =
        '‚Ä¢ Gagner 200 points ‚Üí Coffre bronze (reste ' + pointsToCoffre + ')';

      const streakRemaining = Math.max(0, streakTarget - streak);
      missionStreakEl.textContent =
        '‚Ä¢ S√©rie de 25 sauts (reste ' + streakRemaining + ') ‚Üí Mini bonus x2 10s';

      energyTextEl.textContent = '√ânergie : ' + energy + ' / ' + maxEnergy;
      tapBtn.disabled = energy <= 0;

      lvlTapEl.textContent = tapUpgradeLevel;
      lvlEnergyEl.textContent = maxEnergy;
      btnUpTap.disabled = points < 50;
      btnUpEnergy.disabled = points < 80;
      btnUpRegen.disabled = points < 60;

      if (isBuffActive) {
        frogEl.classList.add('frog-buff');
      } else {
        frogEl.classList.remove('frog-buff');
      }

      updateTheme();
    }

    function startBuff(durationMs, label) {
      const now = Date.now();
      buffEndTime = now + durationMs;
      isBuffActive = true;
      buffMultiplier = 2;
      buffTextEl.textContent = 'Bonus actif : x2 (' + label + ')';

      if (buffInterval) clearInterval(buffInterval);
      buffInterval = setInterval(() => {
        const remaining = buffEndTime - Date.now();
        if (remaining <= 0) {
          isBuffActive = false;
          buffMultiplier = 1;
          buffTextEl.textContent = '';
          clearInterval(buffInterval);
          updateUI();
        }
      }, 200);

      updateUI();
    }

    function triggerJump() {
      frogEl.classList.remove('jumping');
      void frogEl.offsetWidth;
      frogEl.classList.add('jumping');
    }

    function handleTap() {
      if (energy <= 0) return;

      const now = Date.now();
      if (!lastTapTime || now - lastTapTime <= streakTimeoutMs) {
        streak += 1;
      } else {
        streak = 1;
      }
      lastTapTime = now;

      const gainBase = tapValue;
      const gain = gainBase * buffMultiplier;
      points += gain;
      taps += 1;
      energy = Math.max(0, energy - 1);

      if (points % pointsPerXp === 0) {
        xp += 1;
      }

      if (xp >= xpPerLevel) {
        xp -= xpPerLevel;
        level += 1;
        alert('LEVEL UP ! Niveau ' + level);
      }

      if (taps === tapsTarget) {
        startBuff(30000, '100 sauts');
        alert('Boost x2 pendant 30s !');
      }

      if (streak === streakTarget) {
        startBuff(10000, 's√©rie 25');
        alert('Mini bonus x2 pendant 10s !');
      }

      showFloatingPlus(gain);
      triggerJump();
      updateUI();
    }

    function showFloatingPlus(gain) {
      floatingPlusEl.textContent = '+' + gain;
      floatingPlusEl.style.opacity = '1';
      floatingPlusEl.style.transform = 'translateY(0px)';

      setTimeout(() => {
        floatingPlusEl.style.opacity = '0';
        floatingPlusEl.style.transform = 'translateY(-10px)';
      }, 220);
    }

    setInterval(() => {
      if (energy < maxEnergy) {
        energy += 1;
        updateUI();
      }
    }, regenMs);

    btnUpTap.addEventListener('click', () => {
      if (points < 50) return;
      points -= 50;
      tapUpgradeLevel += 1;
      tapValue += 1;
      updateUI();
    });

    btnUpEnergy.addEventListener('click', () => {
      if (points < 80) return;
      points -= 80;
      maxEnergy += 20;
      energy = maxEnergy;
      updateUI();
    });

    btnUpRegen.addEventListener('click', () => {
      if (points < 60) return;
      points -= 60;
      regenMs = Math.max(10000, regenMs - 5000);
      alert('Regen √©nergie am√©lior√©e !');
      updateUI();
    });

    tapBtn.addEventListener('click', handleTap);
    gameAreaEl.addEventListener('click', handleTap);

    updateUI();
  </script>
</body>
</html>
